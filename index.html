<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold News Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/compromise"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-4 sm:py-8">
        <!-- Header Section - Stacked on mobile, row on larger screens -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
            <!-- Gold News Header -->
            <div class="flex-1">
                <h1 class="text-2xl sm:text-3xl font-bold text-yellow-600">
                    <i class="fas fa-coins mr-2"></i>Gold News 
                </h1>
                <p class="text-gray-600 text-sm sm:text-base mt-1 sm:mt-2">News impact on gold prices</p>
            </div>
            
            <!-- Forex Factory Header -->
            <div class="flex-1">
                <a class="text-2xl sm:text-3xl font-bold text-blue-600 hover:text-blue-800 transition" href="https://www.forexfactory.com/calendar">
                    <i class="fas fa-calendar-alt mr-2"></i>forexfactory.com
                </a>
                <p class="text-gray-600 text-sm sm:text-base mt-1 sm:mt-2">Economic events that move the markets</p>
            </div>
            
            <!-- Thai Clock - Centered on mobile, right on larger screens -->
            <div class="flex-1 text-center md:text-right">
                <div id="thai-clock" class="text-2xl sm:text-3xl font-bold text-blue-600"></div>
                <div id="thai-date" class="text-gray-500 text-sm sm:text-base mt-1 sm:mt-2"></div>
            </div>
        </div>

        <!-- Main Content - Stacked on mobile, side-by-side on larger screens -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <!-- Chart Section - Full width on mobile, 2/3 on desktop -->
            <div class="lg:col-span-2 bg-white rounded-lg shadow-md overflow-hidden">
                <div class="p-2 sm:p-3 h-[400px] sm:h-[500px] lg:h-[600px]">
                    <div class="tradingview-widget-container__widget rounded-lg h-full">
                        <div id="tradingview_chart" class="h-full w-full"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                        <script>
                        new TradingView.widget({
                            "autosize": true,
                            "symbol": "OANDA:XAUUSD",
                            "interval": "D",
                            "timezone": "Etc/UTC",
                            "theme": "light",
                            "style": "1",
                            "locale": "en",
                            "toolbar_bg": "#f1f3f6",
                            "enable_publishing": false,
                            "hide_side_toolbar": false,
                            "allow_symbol_change": true,
                            "container_id": "tradingview_chart",
                            "disabled_features": ["header_widget"]
                        });
                        </script>
                    </div>
                </div>
            </div>
            
            <!-- Calendar Section - Full width on mobile, 1/3 on desktop -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
                <!-- Widget Header -->
                <div class="bg-gradient-to-r from-blue-600 to-blue-800 px-4 sm:px-6 py-3 sm:py-4">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3">
                        <div class="flex items-center">
                            <svg class="h-5 sm:h-6 w-5 sm:w-6 text-white mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/>
                            </svg>
                            <h2 class="text-base sm:text-lg font-bold text-white">Market Economic Calendar</h2>
                        </div>
                        <div class="flex items-center space-x-2 bg-blue-700/30 px-2 sm:px-3 py-1 rounded-full">
                            <span class="text-blue-100 text-xs sm:text-sm">Live Data</span>
                            <div class="h-2 w-2 bg-green-400 rounded-full animate-pulse"></div>
                        </div>
                    </div>
                </div>

                <div class="h-[400px] sm:h-[500px] overflow-y-auto">
                    <div class="tradingview-widget-container w-full h-full">
                        <div class="tradingview-widget-container__widget rounded-lg h-full"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
                        {
                            "colorTheme": "light",
                            "isTransparent": false,
                            "width": "100%",
                            "height": "100%",
                            "locale": "en",
                            "importanceFilter": "-1,0,1",
                            "currencyFilter": "USD,EUR,GBP,JPY,AUD,CAD,NZD,CHF,CNY",
                            "utcOffset": "0"
                        }
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function updateThaiTime() {
            const now = new Date();
            
            // Set to Thai time (UTC+7)
            const thaiOffset = 7 * 60 * 60 * 1000;
            const thaiTime = new Date(now.getTime() + thaiOffset);
            
            // AM/PM time format
            let hours = thaiTime.getUTCHours();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // 0 hour shows as 12
            
            const minutes = thaiTime.getUTCMinutes().toString().padStart(2, '0');
            const seconds = thaiTime.getUTCSeconds().toString().padStart(2, '0');
            
            // Thai date format
            const thaiMonths = [
                'มกราคม Jan', 
                'กุมภาพันธ์ Feb', 
                'มีนาคม Mar',
                'เมษายน Apr',
                'พฤษภาคม May',
                'มิถุนายน Jun',
                'กรกฎาคม Jul',
                'สิงหาคม Aug',
                'กันยายน Sep',
                'ตุลาคม Oct',
                'พฤศจิกายน Nov',
                'ธันวาคม Dec'
            ];
            const day = thaiTime.getUTCDate();
            const month = thaiMonths[thaiTime.getUTCMonth()];
            const year = thaiTime.getUTCFullYear() + 543; // Convert to Buddhist year
            
            const thaiDays = [
                'อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ',
                'พฤหัสบดี', 'ศุกร์', 'เสาร์'
            ];
            const dayOfWeek = thaiDays[thaiTime.getUTCDay()];
            
            // Display
            document.getElementById('thai-clock').textContent = 
                `${hours}:${minutes}:${seconds} ${ampm}`;
            
            document.getElementById('thai-date').textContent = 
                `วัน${dayOfWeek}ที่ ${day} ${month} พ.ศ. ${year}`;
        }
        
        // Update time every second
        updateThaiTime();
        setInterval(updateThaiTime, 1000);
    </script>
    
    <!-- Chart.js for sentiment visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>