<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News</title>
    <link rel="icon" href="https://i.pinimg.com/236x/13/c3/31/13c331babe334af5949a6542f6fe5fd7.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/compromise"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap');

        body {
            font-family: 'Kanit', sans-serif;
            background: black;
            min-height: 100vh;
        }

        .video-card:hover .video-thumbnail {
            transform: scale(1.03);
        }

        .search-box {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.6;
            }
        }
    </style>
<style>
#load-more {
    display: block;
    margin: 24px auto;
    padding: 12px 32px;
    font-size: 15px;
    font-weight: 600;
    color: #1f2933;
    /* background: linear-gradient(135deg, #facc15, #d4af37); */
    border: none;
    border-radius: 999px;
    cursor: pointer;
   
    transition: all 0.25s ease;
}

#load-more:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #fde047, #e6b800);
    box-shadow: 
        0 12px 28px rgba(212, 175, 55, 0.6),
        inset 0 1px 0 rgba(255,255,255,0.7);
}

#load-more:active {
    transform: scale(0.96);
    box-shadow: 
        0 6px 14px rgba(212, 175, 55, 0.5),
        inset 0 2px 4px rgba(0,0,0,0.25);
}

#load-more:disabled {
    background: linear-gradient(135deg, #a16207, #78350f);
    color: #fde68a;
    cursor: not-allowed;
    box-shadow: none;
}
</style>


    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Noto Sans', sans-serif;
            background: #000000;
        }

        .news-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class=" min-h-screen">
    <div class="container mx-auto px-4 py-4 sm:py-8 flex flex-col">
        <!-- Header Section - Stacked on mobile, row on larger screens -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
            <!-- Gold News Header -->
            <div class="flex-1">
                <h1 class="text-2xl sm:text-3xl font-bold text-yellow-600">
                    <i class="fas fa-coins mr-2"></i>Gold News
                </h1>
                <p class="text-white text-sm sm:text-base mt-1 sm:mt-2">News impact on gold prices</p>
            </div>



            <!-- Thai Clock - Centered on mobile, right on larger screens -->
            <div class="flex-1 text-center md:text-right">
                <div id="thai-clock" class="text-2xl sm:text-3xl font-bold text-blue-600"></div>
                <div id="thai-date" class="text-gray-500 text-sm sm:text-base mt-1 sm:mt-2"></div>
            </div>
        </div>

        <!-- Main Content - Stacked on mobile, side-by-side on larger screens -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <!-- Chart Section - Full width on mobile, 2/3 on desktop -->
            <div class="lg:col-span-2 bg-black rounded-lg shadow-md overflow-hidden">
                <div class="p-2 sm:p-3 h-[400px] sm:h-[500px] lg:h-[725px]">
                    <div class="tradingview-widget-container__widget rounded-lg h-full">
                        <div id="tradingview_chart" class="h-full w-full"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                        <script>
                            new TradingView.widget({
                                "autosize": true,
                                "symbol": "OANDA:XAUUSD",
                                "interval": "D",
                                "timezone": "Etc/UTC",
                                "theme": "dark",
                                "style": "1",
                                "locale": "en",
                                "toolbar_bg": "#f1f3f6",
                                "enable_publishing": false,
                                "hide_side_toolbar": false,
                                "allow_symbol_change": true,
                                "container_id": "tradingview_chart",
                                "disabled_features": ["header_widget"]
                            });
                        </script>
                    </div>
                </div>

            </div>
            


            <!-- Calendar Section - Full width on mobile, 1/3 on desktop -->
            <div class="bg-black rounded-xl shadow-lg overflow-hidden border border-black">
                <!-- Widget Header -->
                <div class="bg-gradient-to-r from-blue-600 to-blue-800 px-4 sm:px-6 py-3 sm:py-4">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3">
                        <div class="flex items-center">
                            <svg class="h-5 sm:h-6 w-5 sm:w-6 text-white mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z" />
                            </svg>
                            <h2 class="text-base sm:text-lg font-bold text-white">Market Economic Calendar</h2>
                        </div>
                        <div class="flex items-center space-x-2 bg-blue-700/30 px-2 sm:px-3 py-1 rounded-full">
                            <span class="text-blue-100 text-xs sm:text-sm">Live Data</span>
                            <div class="h-2 w-2 bg-green-400 rounded-full animate-pulse"></div>
                        </div>
                    </div>
                </div>

                <div class="h-[400px] sm:h-[656px] overflow-y-auto">
                    <div class="tradingview-widget-container w-full h-full">
                        <div class="tradingview-widget-container__widget rounded-lg h-full"></div>
                        <script type="text/javascript"
                            src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
                                {
                                    "colorTheme": "dark",
                                        "isTransparent": false,
                                            "width": "100%",
                                                "height": "100%",
                                                    "locale": "en",
                                                        "importanceFilter": "-1,0,1",
                                                            "currencyFilter": "USD,EUR,GBP,JPY,AUD,CAD,NZD,CHF,CNY",
                                                                "utcOffset": "0"
                                }
                            </script>
                    </div>
                </div>
            </div>
            <!-- Thai Gold Price Panel -->
            <div class="mt-4 bg-zinc-900 border border-yellow-700 rounded-xl p-4 w-[1000px]">
            <h2 class="text-xl font-bold text-yellow-500 mb-3">
                üü° ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢ (‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥)
            </h2>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-white">
                <div class="bg-black rounded-lg p-3 border border-zinc-700">
                    <p class="text-sm text-gray-400">‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á 96.5%</p>
                    <p id="bar-price" class="text-lg font-semibold">Loading...</p>
                </div>

                <div class="bg-black rounded-lg p-3 border border-zinc-700">
                    <p class="text-sm text-gray-400">‡∏ó‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì 96.5%</p>
                    <p id="ornament-price" class="text-lg font-semibold">Loading...</p>
                </div>
            </div>

            <p id="gold-update-time" class="text-xs text-gray-500 mt-3"></p>
            <!-- Gold Price History -->
            <div class="mt-6 bg-zinc-900 border border-yellow-700 rounded-xl p-4 text-white">
                <h2 class="text-xl font-bold text-yellow-500 mb-3">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á & ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</h2>
                <div class="overflow-x-auto">
                    <table border="1" cellpadding="6" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
                                <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ó‡πà‡∏á</th>
                                <th>‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏ó‡πà‡∏á</th>
                                <th>‡∏Ç‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì</th>
                                <th>‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì</th>
                                <th>Gold Spot</th>
                                <th>USD/THB</th>
                                <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                            </tr>
                        </thead>
                        <tbody id="history-table"></tbody>
                    </table>
                   
                </div>
                <button class="bg-yellow-500" id="load-more"  onclick="loadMoreHistory()">
                        ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°
                </button>
            </div>
            
            </div>


        </div>
    <script>
        function changeColor(change) {
            if (change <= -700) return "red";
            if (change < 0) return "orange";
            if (change >= 200) return "green";
            return "lightgreen";
        }

        let allHistory = [];
        let historyIndex = 0;
        const PAGE_SIZE = 20;

        async function loadThaiGoldPrice() {
            try {
                const res = await fetch("https://r2.goldtraders.or.th/latest_prices.json");
                const data = await res.json();
                const bar = data.current_prices.gold_bar;
                const ornament = data.current_prices.gold_ornament;

                document.getElementById("bar-price").innerHTML =
                    `<span style="color:${changeColor(bar.change)}">
                        ‡∏Ç‡∏≤‡∏¢ ${bar.sell.toLocaleString()} ‡∏ø 
                        (${bar.change > 0 ? "+" : ""}${bar.change})
                    </span><br>
                    ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠ ${bar.buy.toLocaleString()} ‡∏ø`;

                document.getElementById("ornament-price").innerHTML =
                    `<span style="color:${changeColor(ornament.change)}">
                        ‡∏Ç‡∏≤‡∏¢ ${ornament.sell.toLocaleString()} ‡∏ø 
                        (${ornament.change > 0 ? "+" : ""}${ornament.change})
                    </span><br>
                    ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠ ${ornament.buy.toLocaleString()} ‡∏ø`;

                document.getElementById("gold-update-time").textContent =
                    `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${data.metadata.publish_date} ${data.metadata.last_updated}`;

                /* ===== ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ===== */

                /* ===== ‡πÄ‡∏Å‡πá‡∏ö history ===== */
                allHistory = data.history;
                historyIndex = 0;
                document.getElementById("history-table").innerHTML = "";

                loadMoreHistory();

            } catch (err) {
                console.error(err);
            }
        }

        function loadMoreHistory() {
            const tbody = document.getElementById("history-table");

            const slice = allHistory.slice(historyIndex, historyIndex + PAGE_SIZE);

            slice.forEach((h, i) => {
                const tr = document.createElement("tr");

                let change = 0;
                if (h.note) {
                    const match = h.note.match(/-?\d+/);
                    if (match) change = parseInt(match[0]);
                }

                if (change <= -700) tr.style.color = "red";
                else if (change < 0) tr.style.color = "orange";
                else if (change >= 200) tr.style.color = "green";
                else tr.style.color = "lightgreen";

                tr.innerHTML = `
                    <td>${historyIndex + i + 1}</td>
                    <td>${h.time}</td>
                    <td>${h.price?.toLocaleString() ?? "-"}</td>
                    <td>${h.bar_buy?.toLocaleString() ?? "-"}</td>
                    <td>${h.ornament_sell?.toLocaleString() ?? "-"}</td>
                    <td>${h.ornament_buy?.toLocaleString() ?? "-"}</td>
                    <td>${h.gold_spot ?? "-"}</td>
                    <td>${h.usd_thb ?? "-"}</td>
                    <td>${h.note ?? ""}</td>
                `;

                tbody.appendChild(tr);
            });

            historyIndex += PAGE_SIZE;

            /* ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß */
            if (historyIndex >= allHistory.length) {
                document.getElementById("load-more").style.display = "none";
            }
        }

        loadThaiGoldPrice();


    </script>





        <script>


            function updateThaiTime() {
                const now = new Date();

                // Set to Thai time (UTC+7)
                const thaiOffset = 7 * 60 * 60 * 1000;
                const thaiTime = new Date(now.getTime() + thaiOffset);

                // AM/PM time format
                let hours = thaiTime.getUTCHours();
                const ampm = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12;
                hours = hours ? hours : 12; // 0 hour shows as 12

                const minutes = thaiTime.getUTCMinutes().toString().padStart(2, '0');
                const seconds = thaiTime.getUTCSeconds().toString().padStart(2, '0');

                // Thai date format
                const thaiMonths = [
                    '‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° Jan',
                    '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå Feb',
                    '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° Mar',
                    '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô Apr',
                    '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏° May',
                    '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô Jun',
                    '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏° Jul',
                    '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° Aug',
                    '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô Sep',
                    '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° Oct',
                    '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô Nov',
                    '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° Dec'
                ];
                const day = thaiTime.getUTCDate();
                const month = thaiMonths[thaiTime.getUTCMonth()];
                const year = thaiTime.getUTCFullYear() + 543; // Convert to Buddhist year

                const thaiDays = [
                    '‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå', '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', '‡∏û‡∏∏‡∏ò',
                    '‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ', '‡∏®‡∏∏‡∏Å‡∏£‡πå', '‡πÄ‡∏™‡∏≤‡∏£‡πå'
                ];
                const dayOfWeek = thaiDays[thaiTime.getUTCDay()];

                // Display
                document.getElementById('thai-clock').textContent =
                    `${hours}:${minutes}:${seconds} ${ampm}`;

                document.getElementById('thai-date').textContent =
                    `‡∏ß‡∏±‡∏ô${dayOfWeek}‡∏ó‡∏µ‡πà ${day} ${month} ‡∏û.‡∏®. ${year}`;
            }

            // Update time every second
            updateThaiTime();
            setInterval(updateThaiTime, 1000);
        </script>

        <!-- Chart.js for sentiment visualization -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>

</html>