<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News</title>
    <link rel="icon" href="https://i.pinimg.com/236x/13/c3/31/13c331babe334af5949a6542f6fe5fd7.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/compromise"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap');
        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .video-card:hover .video-thumbnail {
            transform: scale(1.03);
        }
        .search-box {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .pulse {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
    </style>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Noto Sans', sans-serif;
            background: #f8fafc;
        }
        .news-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-4 sm:py-8 mt-10 flex flex-col">
        <!-- Header Section - Stacked on mobile, row on larger screens -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
            <!-- Gold News Header -->
            <div class="flex-1">
                <h1 class="text-2xl sm:text-3xl font-bold text-yellow-600">
                    <i class="fas fa-coins mr-2"></i>Gold News 
                </h1>
                <p class="text-gray-600 text-sm sm:text-base mt-1 sm:mt-2">News impact on gold prices</p>
            </div>
            
            <!-- Forex Factory Header -->
            <div class="flex-1">
                <a class="text-2xl sm:text-3xl font-bold text-blue-600 hover:text-blue-800 transition" href="https://www.forexfactory.com/calendar">
                    <i class="fas fa-calendar-alt mr-2"></i>forexfactory.com
                </a>
                <p class="text-gray-600 text-sm sm:text-base mt-1 sm:mt-2">Economic events that move the markets</p>
            </div>

            <div>
                <div class="w-full flex">
                    <div class="flex justify-center items-center mb-4 w-[90px] mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 112 32" category="logo" icon="bbc" class="sc-9c8c5e05-0 cySMiL"><title>British Broadcasting Corporation</title><path d="M111.99999,4.44444577e-05 L111.99999,32.0000444 L79.9999905,32.0000444 L79.9999905,4.44444577e-05 L111.99999,4.44444577e-05 Z M72.0000119,-3.55271368e-15 L72.0000119,32 L40.0000119,32 L40.0000119,-3.55271368e-15 L72.0000119,-3.55271368e-15 Z M32,-3.55271368e-15 L32,32 L-1.13686838e-13,32 L-1.13686838e-13,-3.55271368e-15 L32,-3.55271368e-15 Z M97.469329,6.80826869 C96.0294397,6.80826869 94.7294393,7.02226876 93.5693278,7.44982444 C92.4089942,7.87782457 91.4137717,8.49471364 90.5841047,9.30049166 C89.7538823,10.1067141 89.1188821,11.07327 88.6785486,12.199937 C88.2378818,13.3269373 88.0177706,14.5896043 88.0177706,15.9876048 C88.0177706,17.4188274 88.2296596,18.7062722 88.6531042,19.8493837 C89.0763265,20.9929396 89.6861045,21.9591621 90.482438,22.748829 C91.2784383,23.5383848 92.2522163,24.1430516 93.4042167,24.5624962 C94.5558837,24.9819408 95.8516619,25.1917186 97.2914401,25.1917186 C98.3752182,25.1917186 99.4086629,25.072163 100.391219,24.8338296 C101.37333,24.5956073 102.237108,24.2706072 102.982664,23.8592738 L102.982664,23.8592738 L102.982664,20.4292727 C101.40733,21.4001619 99.6881074,21.8851621 97.8251069,21.8851621 C96.6054399,21.8851621 95.567884,21.6549398 94.7126615,21.194273 C93.8572168,20.7338284 93.2049944,20.0633837 92.7564387,19.1831613 C92.3073275,18.3032721 92.0831052,17.2380496 92.0831052,15.9876048 C92.0831052,14.7377155 92.3156608,13.6766041 92.7816609,12.8044927 C93.2474389,11.9327147 93.916328,11.2664922 94.7888838,10.8058254 C95.6609951,10.3453809 96.715551,10.1148252 97.9521069,10.1148252 C98.8496628,10.1148252 99.7052186,10.2342697 100.518108,10.4726031 C101.331219,10.7112699 102.084664,11.0609366 102.779442,11.5212701 L102.779442,11.5212701 L102.779442,8.01738016 C102.017219,7.62260227 101.191441,7.32260218 100.302219,7.11671323 C99.4129963,6.91126872 98.4685515,6.80826869 97.469329,6.80826869 Z M55.7552388,7.00000208 L49.0000146,7.00000208 L49.0000146,25.0000021 L56.1713501,25.0000021 C57.590906,25.0000021 58.8063508,24.7903407 59.8181289,24.3706739 C60.8297959,23.9513405 61.6087961,23.3553403 62.1555741,22.5832289 C62.7020187,21.8114509 62.9754632,20.8882284 62.9754632,19.8140059 C62.9754632,18.7232278 62.6941298,17.7960053 62.1312407,17.0321162 C61.5681294,16.2686715 60.7563514,15.7104491 59.6957955,15.3580046 C60.4625736,14.9891156 61.0420182,14.4894488 61.4335738,13.8601152 C61.8252406,13.2307817 62.0210185,12.4881148 62.0210185,11.6321146 C62.0210185,10.1385586 61.4742405,8.99311379 60.3812402,8.19578022 C59.2877954,7.39889109 57.745795,7.00000208 55.7552388,7.00000208 L55.7552388,7.00000208 Z M15.7552269,7.00000208 L9.00000268,7.00000208 L9.00000268,25.0000021 L16.1713381,25.0000021 C17.5908941,25.0000021 18.8062278,24.7903407 19.8182281,24.3706739 C20.8296729,23.9513405 21.6087842,23.3553403 22.1555621,22.5832289 C22.7021179,21.8114509 22.9755624,20.8882284 22.9755624,19.8140059 C22.9755624,18.7232278 22.6941179,17.7960053 22.1311177,17.0321162 C21.5682286,16.2686715 20.7563395,15.7104491 19.6957836,15.3580046 C20.4625616,14.9891156 21.0418952,14.4894488 21.4335619,13.8601152 C21.8252287,13.2307817 22.0210066,12.4881148 22.0210066,11.6321146 C22.0210066,10.1385586 21.4741175,8.99311379 20.3811172,8.19578022 C19.2877835,7.39889109 17.7457831,7.00000208 15.7552269,7.00000208 L15.7552269,7.00000208 Z M55.8775833,17.2209385 C58.1128062,17.2209385 59.2308065,18.0434943 59.2308065,19.6881614 C59.2308065,20.4602728 58.9369175,21.0518285 58.3496951,21.4629397 C57.7622505,21.8743843 56.9216947,22.0797177 55.8286944,22.0797177 L55.8286944,22.0797177 L52.6469157,22.0797177 L52.6469157,17.2209385 Z M15.8775714,17.2209385 C18.1129054,17.2209385 19.2307946,18.0434943 19.2307946,19.6881614 C19.2307946,20.4602728 18.9370167,21.0518285 18.3496832,21.4629397 C17.7622386,21.8743843 16.9216828,22.0797177 15.8286825,22.0797177 L15.8286825,22.0797177 L12.6469038,22.0797177 L12.6469038,17.2209385 Z M55.412572,9.92028073 C57.3541282,9.92028073 58.3252396,10.6338365 58.3252396,12.0600591 C58.3252396,12.7988371 58.0763506,13.373504 57.5786838,13.7846152 C57.0807948,14.1960598 56.3587946,14.4013932 55.412572,14.4013932 L55.412572,14.4013932 L52.6469046,14.4013932 L52.6469046,9.92028073 Z M15.4125601,9.92028073 C17.3541163,9.92028073 18.3252277,10.6338365 18.3252277,12.0600591 C18.3252277,12.7988371 18.0762276,13.373504 17.5786719,13.7846152 C17.0807829,14.1960598 16.3587826,14.4013932 15.4125601,14.4013932 L15.4125601,14.4013932 L12.6468927,14.4013932 L12.6468927,9.92028073 Z"></path></svg>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">BBC World News</h1>
                </div>
                
                
                <p class="text-gray-600">Latest international news from the BBC</p>
            </div>

           
            
            <!-- Thai Clock - Centered on mobile, right on larger screens -->
            <div class="flex-1 text-center md:text-right">
                <div id="thai-clock" class="text-2xl sm:text-3xl font-bold text-blue-600"></div>
                <div id="thai-date" class="text-gray-500 text-sm sm:text-base mt-1 sm:mt-2"></div>
            </div>
        </div>

        <!-- Main Content - Stacked on mobile, side-by-side on larger screens -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            <!-- Chart Section - Full width on mobile, 2/3 on desktop -->
            <div class="lg:col-span-2 bg-white rounded-lg shadow-md overflow-hidden">
                <div class="p-2 sm:p-3 h-[400px] sm:h-[500px] lg:h-[600px]">
                    <div class="tradingview-widget-container__widget rounded-lg h-full">
                        <div id="tradingview_chart" class="h-full w-full"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                        <script>
                        new TradingView.widget({
                            "autosize": true,
                            "symbol": "OANDA:XAUUSD",
                            "interval": "D",
                            "timezone": "Etc/UTC",
                            "theme": "light",
                            "style": "1",
                            "locale": "en",
                            "toolbar_bg": "#f1f3f6",
                            "enable_publishing": false,
                            "hide_side_toolbar": false,
                            "allow_symbol_change": true,
                            "container_id": "tradingview_chart",
                            "disabled_features": ["header_widget"]
                        });
                        </script>
                    </div>
                </div>
                
            </div>
            
            
            <!-- Calendar Section - Full width on mobile, 1/3 on desktop -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
                <!-- Widget Header -->
                <div class="bg-gradient-to-r from-blue-600 to-blue-800 px-4 sm:px-6 py-3 sm:py-4">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3">
                        <div class="flex items-center">
                            <svg class="h-5 sm:h-6 w-5 sm:w-6 text-white mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/>
                            </svg>
                            <h2 class="text-base sm:text-lg font-bold text-white">Market Economic Calendar</h2>
                        </div>
                        <div class="flex items-center space-x-2 bg-blue-700/30 px-2 sm:px-3 py-1 rounded-full">
                            <span class="text-blue-100 text-xs sm:text-sm">Live Data</span>
                            <div class="h-2 w-2 bg-green-400 rounded-full animate-pulse"></div>
                        </div>
                    </div>
                </div>

                <div class="h-[400px] sm:h-[500px] overflow-y-auto">
                    <div class="tradingview-widget-container w-full h-full">
                        <div class="tradingview-widget-container__widget rounded-lg h-full"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
                        {
                            "colorTheme": "light",
                            "isTransparent": false,
                            "width": "100%",
                            "height": "100%",
                            "locale": "en",
                            "importanceFilter": "-1,0,1",
                            "currencyFilter": "USD,EUR,GBP,JPY,AUD,CAD,NZD,CHF,CNY",
                            "utcOffset": "0"
                        }
                        </script>
                    </div>
                </div>
            </div>
        </div>
        <div class="container mx-auto px-4 py-8">
         
            
            <!-- Category Selector -->
            
            <div class="mb-6 p-4 rounded-xl shadow-xl border border-gray-100">
                <h2 class="text-2xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-400">
                    <i class="fas fa-globe mr-2"></i> เลือกหมวดข่าวสุดชิค
                </h2>
                <div class="flex flex-wrap gap-3">
                    <!-- World -->
                    <button data-category="world" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105 active:scale-95">
                        <span class="text-red-400 group-hover:text-white font-medium"><i class="fas fa-globe-americas mr-1"></i> World</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-red-600 to-orange-500 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button>
            
                    <!-- Business -->
                    <button data-category="business" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105">
                        <span class="text-blue-300 group-hover:text-white font-medium"><i class="fas fa-chart-line mr-1"></i> Business</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-blue-600 to-cyan-400 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button>
            
                    <!-- Technology -->
                    <button data-category="technology" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105">
                        <span class="text-purple-400 group-hover:text-white font-medium"><i class="fas fa-microchip mr-1"></i> Tech</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-500 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button>
            
                    <!-- Science
                    <button data-category="science" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105">
                        <span class="text-emerald-300 group-hover:text-white font-medium"><i class="fas fa-atom mr-1"></i> Science</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-600 to-teal-400 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button> -->
            
                    <!-- Health -->
                    <button data-category="health" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105">
                        <span class="text-green-400 group-hover:text-white font-medium"><i class="fas fa-heartbeat mr-1"></i> Health</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-green-600 to-lime-400 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button>
            
                    <!-- Entertainment -->
                    <!-- <button data-category="entertainment" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105">
                        <span class="text-yellow-300 group-hover:text-white font-medium"><i class="fas fa-film mr-1"></i> Entertainment</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-yellow-600 to-amber-500 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button> -->
            
                    <!-- Sports -->
                    <!-- <button data-category="sport" class="category-btn group relative overflow-hidden bg-gray-800 hover:bg-gray-700 px-5 py-2.5 rounded-full border border-gray-600 transition-all duration-300 hover:scale-105">
                        <span class="text-orange-400 group-hover:text-white font-medium"><i class="fas fa-running mr-1"></i> Sports</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-orange-600 to-red-500 opacity-0 group-hover:opacity-100 -z-10 transition-opacity duration-300"></div>
                    </button> -->
                </div>
            </div>
            
            <!-- News Info -->
            <div class="flex justify-between items-center mb-4">
                <div id="updateTime" class="text-sm text-gray-600">Last updated: Not loaded yet</div>
                <button id="refreshBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded text-sm flex items-center">
                    <i class="fas fa-sync-alt mr-1"></i> Refresh
                </button>
            </div>
            
            <!-- Loading Indicator -->
            <div id="loading2" class="hidden text-center py-8">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-600"></div>
                <p class="mt-2 text-gray-600">Loading news...</p>
            </div>
            
            <!-- Error Message -->
            <div id="error" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded">
                <p id="errorMessage"></p>
            </div>
            
            <!-- News Container -->
            <div id="newsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
        <div class="container mx-auto px-4 py-8 max-w-7xl mt-10">
            <!-- Header -->
            <header class="mb-10 text-center">
                
                
                
                <!-- Search Box -->
                <div class="mt-8 max-w-2xl mx-auto relative">
                    <div class="search-box bg-white rounded-full p-1 pl-6 flex items-center shadow-lg">
                        <i class="fas fa-search text-gray-400 mr-3"></i>
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="ค้นหาข่าว เช่น ข่าวเศรษฐกิจ, ข่าวการเมือง..." 
                            class="flex-grow py-3 outline-none text-gray-700 placeholder-gray-400"
                            value="BBC"
                        >
                        <button 
                            id="searchButton"
                            class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-full hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center"
                            onclick="searchVideos();"
                        >
                            <span>ดูข่าว</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                    <div class="text-left mt-2 ml-6 text-sm text-gray-500">
                        ตัวอย่าง: ข่าวเศรษฐกิจ, ข่าวการเมือง, ข่าวด่วน
                    </div>
                </div>
            </header>
    
            <!-- Content Area -->
            <main>
                <!-- Loading State -->
                
                <div id="loading" class="hidden flex flex-col items-center justify-center py-16">
                    <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"></div>
                    <p class="text-gray-600">กำลังโหลดข้อมูลข่าว...</p>
                </div>
    
                <!-- Empty State -->
                <div id="emptyState" class="hidden text-center py-16">
                    <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-newspaper text-blue-500 text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-medium text-gray-700 mb-2">ไม่พบผลลัพธ์</h3>
                    <p class="text-gray-500 max-w-md mx-auto">ลองใช้คำค้นหาอื่นหรือตรวจสอบการเชื่อมต่ออินเทอร์เน็ตของคุณ</p>
                </div>
    
                <!-- Error State -->
                <div id="errorState" class="hidden text-center py-16">
                    <div class="bg-red-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-exclamation-triangle text-red-500 text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-medium text-gray-700 mb-2">เกิดข้อผิดพลาด</h3>
                    <p class="text-gray-500 mb-4" id="errorMessage"></p>
                    <button onclick="searchVideos()" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition">
                        <i class="fas fa-sync-alt mr-2"></i>ลองอีกครั้ง
                    </button>
                </div>
    
                <!-- Results Grid -->
                <div id="resultsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Skeleton Loading -->
                    <div id="skeletonLoader" class="space-y-6">
                        <div class="bg-white rounded-xl overflow-hidden shadow-md">
                            <div class="bg-gray-200 h-48 pulse"></div>
                            <div class="p-4 space-y-3">
                                <div class="bg-gray-200 h-5 rounded pulse"></div>
                                <div class="bg-gray-200 h-5 rounded w-3/4 pulse"></div>
                                <div class="bg-gray-200 h-4 rounded w-1/2 pulse"></div>
                            </div>
                        </div>
                        <!-- Repeat more skeleton items as needed -->
                    </div>
                    <div id="skeletonLoader" class="space-y-6">
                        <div class="bg-white rounded-xl overflow-hidden shadow-md">
                            <div class="bg-gray-200 h-48 pulse"></div>
                            <div class="p-4 space-y-3">
                                <div class="bg-gray-200 h-5 rounded pulse"></div>
                                <div class="bg-gray-200 h-5 rounded w-3/4 pulse"></div>
                                <div class="bg-gray-200 h-4 rounded w-1/2 pulse"></div>
                            </div>
                        </div>
                        <!-- Repeat more skeleton items as needed -->
                    </div>
                    <div id="skeletonLoader" class="space-y-6">
                        <div class="bg-white rounded-xl overflow-hidden shadow-md">
                            <div class="bg-gray-200 h-48 pulse"></div>
                            <div class="p-4 space-y-3">
                                <div class="bg-gray-200 h-5 rounded pulse"></div>
                                <div class="bg-gray-200 h-5 rounded w-3/4 pulse"></div>
                                <div class="bg-gray-200 h-4 rounded w-1/2 pulse"></div>
                            </div>
                        </div>
                        <!-- Repeat more skeleton items as needed -->
                    </div>
                </div>
    
                <!-- Pagination -->
                <div id="pagination" class="mt-10 flex justify-center hidden">
                    <button id="prevPage" class="px-4 py-2 mx-1 rounded-md bg-gray-200 text-gray-700 disabled:opacity-50">
                        <i class="fas fa-chevron-left mr-2"></i>ย้อนกลับ
                    </button>
                    <div id="pageInfo" class="px-4 py-2 mx-1 text-gray-700">
                        หน้า <span id="currentPage">1</span>
                    </div>
                    <button id="nextPage" class="px-4 py-2 mx-1 rounded-md bg-gray-200 text-gray-700 disabled:opacity-50">
                        ถัดไป<i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </main>
           
        </div>
        
        <script>
            const API_KEY = 'AIzaSyAJ5H0Q1KHTJW_O8AyZFCOz61Qpxqs88Cc';
            const RESULTS_PER_PAGE = 9;
            let currentPage = 1;

            let nextPageToken = '';
            let prevPageToken = '';
    
            // DOM Elements
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const resultsContainer = document.getElementById('resultsContainer');
            const loadingIndicator = document.getElementById('loading');
            const emptyState = document.getElementById('emptyState');
            const errorState = document.getElementById('errorState');
            const skeletonLoader = document.getElementById('skeletonLoader');
            const pagination = document.getElementById('pagination');
            const prevPageBtn = document.getElementById('prevPage');
            const nextPageBtn = document.getElementById('nextPage');
            const currentPageSpan = document.getElementById('currentPage');
    
            // Event Listeners

    
            prevPageBtn.addEventListener('click', () => {
                if (prevPageToken) {
                    currentPage--;
                    searchVideos(prevPageToken);
                }
            });
    
            nextPageBtn.addEventListener('click', () => {
                if (nextPageToken) {
                    currentPage++;
                    searchVideos(nextPageToken);
                }
            });
    
            // Main function to search videos
            async function searchVideos(pageToken = '') {
                try {
                    // Show loading state
                    resultsContainer.innerHTML = '';
                    skeletonLoader.classList.remove('hidden');
                    loadingIndicator.classList.remove('hidden');
                    emptyState.classList.add('hidden');
                    errorState.classList.add('hidden');
                    pagination.classList.add('hidden');
                    let currentSearchQuery = searchInput.value;
    
                    const response = await fetch(
                        `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(currentSearchQuery)}&type=video&maxResults=${RESULTS_PER_PAGE}&pageToken=${pageToken}&key=${API_KEY}`
                    );
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
    
                    const data = await response.json();
                    
                    // Handle pagination tokens
                    nextPageToken = data.nextPageToken || '';
                    prevPageToken = data.prevPageToken || '';
                    
                    // Update UI
                    displayResults(data.items);
                    updatePagination();
                    
                } catch (error) {
                    console.error('Error fetching videos:', error);
                    showError(error.message);
                } finally {
                    loadingIndicator.classList.add('hidden');
                    skeletonLoader.classList.add('hidden');
                }
            }
    
            // Display results function
            function displayResults(videos) {
                resultsContainer.innerHTML = '';
                
                if (!videos || videos.length === 0) {
                    emptyState.classList.remove('hidden');
                    return;
                }
                
                videos.forEach(video => {
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition duration-300';
                    videoCard.innerHTML = `
                        <div class="relative overflow-hidden">
                            <img src="${video.snippet.thumbnails.medium.url}" 
                                 alt="${video.snippet.title}" 
                                 class="video-thumbnail w-full h-48 object-cover transition duration-300">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end p-4">
                                <span class="bg-red-500 text-white text-xs px-2 py-1 rounded">LIVE</span>
                            </div>
                            <div class="absolute top-3 right-3 bg-black/60 text-white text-xs px-2 py-1 rounded">
                                <i class="fas fa-clock mr-1"></i>${formatDate(video.snippet.publishedAt)}
                            </div>
                        </div>
                        <div class="p-4">
                            <h3 class="font-medium text-lg mb-2 line-clamp-2 leading-tight">${video.snippet.title}</h3>
                            <div class="flex items-center text-gray-600 mb-3">
                                <div class="w-8 h-8 rounded-full bg-gray-300 mr-2 overflow-hidden">
                                    <img src="https://i.pravatar.cc/40?u=${video.snippet.channelId}" 
                                         alt="${video.snippet.channelTitle}" 
                                         class="w-full h-full object-cover">
                                </div>
                                <span class="text-sm truncate">${video.snippet.channelTitle}</span>
                            </div>
                            <a href="https://youtube.com/watch?v=${video.id.videoId}" 
                               target="_blank" 
                               class="block w-full bg-blue-500 hover:bg-blue-600 text-white text-center py-2 rounded-lg transition duration-300">
                               <i class="fas fa-play mr-2"></i>ชมวิดีโอ
                            </a>
                        </div>
                    `;
                    resultsContainer.appendChild(videoCard);
                });
            }
    
            // Helper function to format date
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('th-TH', options);
            }
    
            // Update pagination UI
            function updatePagination() {
                if (nextPageToken || prevPageToken) {
                    pagination.classList.remove('hidden');
                    currentPageSpan.textContent = currentPage;
                    prevPageBtn.disabled = !prevPageToken;
                    nextPageBtn.disabled = !nextPageToken;
                } else {
                    pagination.classList.add('hidden');
                }
            }
    
            // Show error state
            function showError(message) {
                errorState.classList.remove('hidden');
                document.getElementById('errorMessage').textContent = message;
            }
    
            // Initial load
            
        </script>
    
    <script>
        
        
        function updateThaiTime() {
            const now = new Date();
            
            // Set to Thai time (UTC+7)
            const thaiOffset = 7 * 60 * 60 * 1000;
            const thaiTime = new Date(now.getTime() + thaiOffset);
            
            // AM/PM time format
            let hours = thaiTime.getUTCHours();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // 0 hour shows as 12
            
            const minutes = thaiTime.getUTCMinutes().toString().padStart(2, '0');
            const seconds = thaiTime.getUTCSeconds().toString().padStart(2, '0');
            
            // Thai date format
            const thaiMonths = [
                'มกราคม Jan', 
                'กุมภาพันธ์ Feb', 
                'มีนาคม Mar',
                'เมษายน Apr',
                'พฤษภาคม May',
                'มิถุนายน Jun',
                'กรกฎาคม Jul',
                'สิงหาคม Aug',
                'กันยายน Sep',
                'ตุลาคม Oct',
                'พฤศจิกายน Nov',
                'ธันวาคม Dec'
            ];
            const day = thaiTime.getUTCDate();
            const month = thaiMonths[thaiTime.getUTCMonth()];
            const year = thaiTime.getUTCFullYear() + 543; // Convert to Buddhist year
            
            const thaiDays = [
                'อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ',
                'พฤหัสบดี', 'ศุกร์', 'เสาร์'
            ];
            const dayOfWeek = thaiDays[thaiTime.getUTCDay()];
            
            // Display
            document.getElementById('thai-clock').textContent = 
                `${hours}:${minutes}:${seconds} ${ampm}`;
            
            document.getElementById('thai-date').textContent = 
                `วัน${dayOfWeek}ที่ ${day} ${month} พ.ศ. ${year}`;
        }
        
        // Update time every second
        updateThaiTime();
        setInterval(updateThaiTime, 1000);
    </script>
   <script>
    // DOM Elements
    const newsContainer = document.getElementById('newsContainer');
    const loadingIndicator2 = document.getElementById('loading2');
    const errorElement = document.getElementById('error');
    const refreshBtn = document.getElementById('refreshBtn');
    const updateTimeElement = document.getElementById('updateTime');
    const categoryButtons = document.querySelectorAll('.category-btn');

    // Current category
    let currentCategory = 'world';

    // Load news when page loads
    document.addEventListener('DOMContentLoaded', () => {
        // Set click handlers for category buttons
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active state
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Set new category and load news
                currentCategory = button.dataset.category;
                loadNews();
            });
        });
        
        // Load initial news
        loadNews();
    });

    // Refresh button click handler
    refreshBtn.addEventListener('click', loadNews);

    // Main function to load news
    async function loadNews() {
        try {
            // Show loading state
            newsContainer.innerHTML = '';
            loadingIndicator2.classList.remove('hidden');
            errorElement.classList.add('hidden');

            // Use CORS Proxy
            const proxyUrl = 'https://api.allorigins.win/get?url=';
            const baseUrl = 'https://feeds.bbci.co.uk/news/';
            const rssEndpoint = '/rss.xml';
            const encodedUrl = encodeURIComponent(`${baseUrl}${currentCategory}${rssEndpoint}`);
            
            // Fetch RSS feed through Proxy
            const response = await fetch(`${proxyUrl}${encodedUrl}`);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            
            // Check if data exists
            if (!data.contents) {
                throw new Error('No content received from proxy');
            }

            const xmlText = data.contents;
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlText, "text/xml");

            // Parse RSS feed
            const items = xmlDoc.querySelectorAll('item');
            if (items.length === 0) {
                throw new Error('No news items found in RSS feed');
            }

            // Display news
            displayNews(items);

            // Update timestamp
            updateTimeElement.textContent = new Date().toLocaleString();

        } catch (error) {
            console.error('Error loading news:', error);
            showError(error.message || 'Failed to load news. Please try again.');
            
            
        } finally {
            loadingIndicator2.classList.add('hidden');
        }
    }

    // Function to display news
    function displayNews(items) {
        newsContainer.innerHTML = '';

        items.forEach(item => {
            const title = item.querySelector('title').textContent;
            const description = item.querySelector('description').textContent;
            const link = item.querySelector('link').textContent;
            const pubDate = new Date(item.querySelector('pubDate').textContent).toLocaleString();
            
            // Get category from feed if available
            const feedCategory = item.querySelector('category')?.textContent || currentCategory;
            
            // Get image
            let imageUrl = 'https://via.placeholder.com/400x225?text=BBC+News';
            const mediaThumbnail = item.querySelector('media\\:thumbnail, thumbnail');
            
            if (mediaThumbnail) {
                imageUrl = mediaThumbnail.getAttribute('url') || 
                        mediaThumbnail.getAttribute('href') || 
                        imageUrl;
            } else {
                const imgMatch = description.match(/<img[^>]+src="([^">]+)"/);
                if (imgMatch) imageUrl = imgMatch[1];
            }

            // Create news card
            const card = document.createElement('div');
            card.className = 'news-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300 hover:shadow-lg';
            card.innerHTML = `
                <div class="relative h-48 overflow-hidden">
                    <img src="${imageUrl}" alt="${title}" 
                        class="w-full h-full object-cover"
                        onerror="this.src='https://via.placeholder.com/400x225?text=BBC+News'">
                    <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
                        <span class="text-xs text-white">${pubDate}</span>
                        <span class="inline-block bg-red-600 text-white text-xs px-2 py-1 rounded ml-2 capitalize">${feedCategory}</span>
                    </div>
                </div>
                <div class="p-4">
                    <h3 class="font-bold text-lg mb-2 line-clamp-2">${title}</h3>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-3">${cleanDescription(description)}</p>
                    <a href="${link}" target="_blank" class="text-red-600 hover:text-red-700 font-medium text-sm flex items-center">
                        Read more <i class="fas fa-arrow-right ml-1 text-xs"></i>
                    </a>
                </div>
            `;
            newsContainer.appendChild(card);
        });
    }

    // Function to clean description
    function cleanDescription(desc) {
        return desc.replace(/<[^>]+>/g, '');
    }

    // Function to show error
    function showError(message) {
        errorElement.classList.remove('hidden');
        document.getElementById('errorMessage').textContent = message;
    }
</script>
    
    <!-- Chart.js for sentiment visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>